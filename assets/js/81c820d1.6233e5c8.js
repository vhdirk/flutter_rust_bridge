"use strict";(self.webpackChunkflutter_rust_bridge=self.webpackChunkflutter_rust_bridge||[]).push([[9234],{3905:(e,t,r)=>{r.d(t,{Zo:()=>p,kt:()=>m});var a=r(67294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var u=a.createContext({}),s=function(e){var t=a.useContext(u),r=t;return e&&(r="function"==typeof e?e(t):l(l({},t),e)),r},p=function(e){var t=s(e.components);return a.createElement(u.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,i=e.originalType,u=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),d=s(r),m=n,y=d["".concat(u,".").concat(m)]||d[m]||c[m]||i;return r?a.createElement(y,l(l({ref:t},p),{},{components:r})):a.createElement(y,l({ref:t},p))}));function m(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=r.length,l=new Array(i);l[0]=d;var o={};for(var u in t)hasOwnProperty.call(t,u)&&(o[u]=t[u]);o.originalType=e,o.mdxType="string"==typeof e?e:n,l[1]=o;for(var s=2;s<i;s++)l[s]=r[s];return a.createElement.apply(null,l)}return a.createElement.apply(null,r)}d.displayName="MDXCreateElement"},39594:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>u,contentTitle:()=>l,default:()=>c,frontMatter:()=>i,metadata:()=>o,toc:()=>s});var a=r(87462),n=(r(67294),r(3905));const i={},l="Overview",o={unversionedId:"manual/integrate/library/overview/index",id:"manual/integrate/library/overview/index",title:"Overview",description:"This section of the user guide will walk you through the entire process of",source:"@site/docs/manual/integrate/07-library/01-overview/index.md",sourceDirName:"manual/integrate/07-library/01-overview",slug:"/manual/integrate/library/overview/",permalink:"/flutter_rust_bridge/manual/integrate/library/overview/",draft:!1,editUrl:"https://github.com/fzyzcjy/flutter_rust_bridge/tree/master/website/docs/manual/integrate/07-library/01-overview/index.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Creating a Dart/Flutter library with binary release",permalink:"/flutter_rust_bridge/manual/integrate/library/"},next:{title:"Setup",permalink:"/flutter_rust_bridge/manual/integrate/library/overview/setup"}},u={},s=[{value:"High Level Design",id:"high-level-design",level:2},{value:"Warning!",id:"warning",level:2}],p={toc:s};function c(e){let{components:t,...r}=e;return(0,n.kt)("wrapper",(0,a.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"overview"},"Overview"),(0,n.kt)("p",null,"This section of the user guide will walk you through the entire process of\nmaking a Dart-only library base with a Flutter library built on top of it."),(0,n.kt)("p",null,"In the end, if you choose to publish to pub.dev, users can simply run:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"flutter pub add flutter_library_name")," for Flutter"),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("inlineCode",{parentName:"li"},"dart pub add library_name")," for Dart-only (say for a CLI or server app)")),(0,n.kt)("p",null,"But you also don't need to publish your library either!\nYou can just use your library internally in a monorepo,\n",(0,n.kt)("a",{parentName:"p",href:"overview/melos"},"as described later on"),"."),(0,n.kt)("h2",{id:"high-level-design"},"High Level Design"),(0,n.kt)("p",null,"We will build out our library from scratch, piece by piece, allowing you to include\nonly what you want in your library.\nIt is intended that whenever a code snippet/file is shown, you read and understand the\ncontent of the snippet so that you can work with your library more easily in the future.\nWe will create the following components:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Dart-only library"),(0,n.kt)("li",{parentName:"ul"},"Flutter library wrapping the Dart-only library"),(0,n.kt)("li",{parentName:"ul"},"CI/CD with GitHub Actions",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Dart/Flutter unit & integration testing",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Test your code on all supported Flutter platforms automatically!"))),(0,n.kt)("li",{parentName:"ul"},"Automate release creation",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"Release library binaries through GitHub releases"),(0,n.kt)("li",{parentName:"ul"},"Create pub.dev releases automatically on GitHub release"))))),(0,n.kt)("li",{parentName:"ul"},"Custom build system to cross-compile to all supported Flutter platforms",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"You need a Mac to compile to macOS/iOS (at least locally)",(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},"But CI can handle your compilation/releases if you don't have a Mac!"))),(0,n.kt)("li",{parentName:"ul"},"Can cross-compile to all other Flutter platforms, no matter your dev device")))),(0,n.kt)("p",null,"For a full working example (that this guide was created based on!),\ntake a look at ",(0,n.kt)("a",{parentName:"p",href:"https://github.com/GregoryConrad/mimir"},"mimir")," (which is created by the author of this chapter of document).\nIt incorporates all functionality present in this guide and some more."),(0,n.kt)("h2",{id:"warning"},"Warning!"),(0,n.kt)("p",null,"Please note, this entire section will be outdated & need to be overhauled once\n",(0,n.kt)("a",{parentName:"p",href:"https://github.com/dart-lang/sdk/issues/50565"},'"Native Assets"')," are added to Dart.\nA lot of the techniques described here are merely workarounds until Dart supports Native Assets."),(0,n.kt)("p",null,"Also, this guide does not currently cover web support, but provides the necessary ground work\nto support web in the future.\nIt ",(0,n.kt)("em",{parentName:"p"},"may")," be worth waiting for Native Assets before trying to come up with a custom solution for WASM.\nFeel free to PR to add web support to this guide!"))}c.isMDXComponent=!0}}]);