"use strict";(self.webpackChunkflutter_rust_bridge=self.webpackChunkflutter_rust_bridge||[]).push([[4576],{3905:(e,t,r)=>{r.d(t,{Zo:()=>d,kt:()=>m});var n=r(67294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var s=n.createContext({}),u=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):l(l({},t),e)),r},d=function(e){var t=u(e.components);return n.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},p=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),p=u(r),m=a,h=p["".concat(s,".").concat(m)]||p[m]||c[m]||i;return r?n.createElement(h,l(l({ref:t},d),{},{components:r})):n.createElement(h,l({ref:t},d))}));function m(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=r.length,l=new Array(i);l[0]=p;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:a,l[1]=o;for(var u=2;u<i;u++)l[u]=r[u];return n.createElement.apply(null,l)}return n.createElement.apply(null,r)}p.displayName="MDXCreateElement"},45344:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>c,frontMatter:()=>i,metadata:()=>o,toc:()=>u});var n=r(87462),a=(r(67294),r(3905));const i={},l="Alternative NDK setup",o={unversionedId:"manual/miscellaneous/archived/tutorial-with-flutter/alternative-ndk",id:"manual/miscellaneous/archived/tutorial-with-flutter/alternative-ndk",title:"Alternative NDK setup",description:"This is only needed if you wish to use a version of the Android NDK higher than version 22 with versions of Rust that are lower than version 1.68.",source:"@site/docs/manual/miscellaneous/92-archived/02-tutorial-with-flutter/03-alternative-ndk.md",sourceDirName:"manual/miscellaneous/92-archived/02-tutorial-with-flutter",slug:"/manual/miscellaneous/archived/tutorial-with-flutter/alternative-ndk",permalink:"/flutter_rust_bridge/manual/miscellaneous/archived/tutorial-with-flutter/alternative-ndk",draft:!1,editUrl:"https://github.com/fzyzcjy/flutter_rust_bridge/tree/master/website/docs/manual/miscellaneous/92-archived/02-tutorial-with-flutter/03-alternative-ndk.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Android setup",permalink:"/flutter_rust_bridge/manual/miscellaneous/archived/tutorial-with-flutter/setup-android"},next:{title:"Set up Flutter/Dart+Rust support from scratch",permalink:"/flutter_rust_bridge/manual/miscellaneous/archived/set-up-from-scratch"}},s={},u=[{value:"Android NDK",id:"android-ndk",level:2},{value:"cargo-ndk",id:"cargo-ndk",level:2},{value:"More details on NDK with flutter_rust_bridge",id:"more-details-on-ndk-with-flutter_rust_bridge",level:2}],d={toc:u};function c(e){let{components:t,...r}=e;return(0,a.kt)("wrapper",(0,n.Z)({},d,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"alternative-ndk-setup"},"Alternative NDK setup"),(0,a.kt)("p",null,"This is only needed if you wish to use a version of the Android NDK higher than version 22 with versions of Rust that are lower than version 1.68.\nThis guide details how to prevent the ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/bbqsrc/cargo-ndk/issues/22"},"unable to find library -lgcc error"),"."),(0,a.kt)("h2",{id:"android-ndk"},"Android NDK"),(0,a.kt)("p",null,"Install the latest NDK:"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"Android Studio > SDK Manager > SDK Tools > NDK (Side by side)")),(0,a.kt)("p",null,"Click on OK at the bottom right corner to start the installation."),(0,a.kt)("h2",{id:"cargo-ndk"},(0,a.kt)("a",{parentName:"h2",href:"https://github.com/bbqsrc/cargo-ndk"},"cargo-ndk")),(0,a.kt)("p",null,"You should install ",(0,a.kt)("inlineCode",{parentName:"p"},"cargo-ndk")," version 2.7.0 or above which works for\nAndroid NDK versions greater than 22."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"cargo install cargo-ndk --version ^2.7.0\n")),(0,a.kt)("p",null,"A workaround may be under development in the cargo-ndk project. Until it is finished,\nyou need to manually create four text files to redirect calls from libgcc to libunwind (",(0,a.kt)("a",{parentName:"p",href:"https://github.com/rust-lang/rust/pull/85806#issuecomment-1096266946"},"reference"),"):"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Find out all the 4 folders containing file ",(0,a.kt)("inlineCode",{parentName:"p"},"libunwind.a"),"."),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"On Windows, it is similar to:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre"},"C:\\Users\\Administrator\\AppData\\Local\\Android\\Sdk\\ndk\\24.0.8215888\\toolchains\\llvm\\prebuilt\\windows-x86_64\\lib64\\clang\\14.0.1\\lib\\linux\\x86_64\\\n"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"On macOS Monterey, it is similar to:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre"},"~/Library/Android/sdk/ndk/24.0.8215888/toolchains/llvm/prebuilt/darwin-x86_64/lib64/clang/14.0.1/lib/linux/x86_64/\n")),(0,a.kt)("p",{parentName:"li"},"The three other folders end with ",(0,a.kt)("inlineCode",{parentName:"p"},"aarch64"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"arm"),",    ",(0,a.kt)("inlineCode",{parentName:"p"},"i386")," instead of ",(0,a.kt)("inlineCode",{parentName:"p"},"x86_64"),".")))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Create 4 text files named ",(0,a.kt)("inlineCode",{parentName:"p"},"libgcc.a")," in the four folders mentioned above with these contents"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre"},"INPUT(-lunwind)\n")))),(0,a.kt)("h2",{id:"more-details-on-ndk-with-flutter_rust_bridge"},"More details on NDK with flutter_rust_bridge"),(0,a.kt)("p",null,"For more details on how NDK works with ",(0,a.kt)("inlineCode",{parentName:"p"},"flutter_rust_bridge"),", have a look at this article (integrate/android_tasks) please."))}c.isMDXComponent=!0}}]);